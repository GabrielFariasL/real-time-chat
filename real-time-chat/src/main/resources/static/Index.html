<!DOCTYPE html>
<html>
<body>
<h2>Chat Simples</h2>
<div id="chat" style="border:1px solid #ccc; height:200px; overflow:auto;"></div>
<input type="text" id="nome" placeholder="Seu nome"><br>
<input type="text" id="mensagem" placeholder="Sua mensagem"><br>
<button onclick="enviar()">Enviar</button>
<script>


    const ws = new WebSocket("ws://localhost:8080/chat");

    ws.onmessage = function(event) {
        const msg = JSON.parse(event.data);
        document.getElementById("chat").innerHTML +=
            `<p><b>${msg.de}:</b> ${msg.texto}</p>`;
    };

    function enviar() {
        const nome = document.getElementById("nome").value;
        const texto = document.getElementById("mensagem").value;

        const mensagem = {
            de: nome,
            texto: texto
        };

        ws.send(JSON.stringify(mensagem));
        document.getElementById("mensagem").value = "";



</script>
</body>
</html>
